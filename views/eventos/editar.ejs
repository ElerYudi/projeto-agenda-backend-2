<!DOCTYPE html>
<html>
<head>
  <title>Editar Evento</title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
  <h1>Editar Evento</h1>

  <% if (typeof erro !== 'undefined') { %>
    <p style="color: red;"><%= erro %></p>
  <% } %>

  <form method="POST">
    <div>
      <label>Título:</label>
      <input type="text" name="titulo" required value="<%= evento.titulo %>">
    </div>
    <div>
      <label>Início:</label>
      <input type="datetime-local" name="dataInicio" required value="<%= dataFormatada.inicio %>">
    </div>
    <div>
      <label>Fim:</label>
      <input type="datetime-local" name="dataFim" required value="<%= dataFormatada.fim %>">
    </div>
    <div>
      <label>Categoria:</label>
      <select name="categoriaId" required>
        <option value="">Selecione...</option>
        <% categorias.forEach(function(cat) { %>
          <option 
            value="<%= cat._id %>" 
            <%= cat._id.equals(evento.categoriaId) ? 'selected' : '' %>>
            <%= cat.nome %>
          </option>
        <% }); %>
      </select>
    </div>
    <div>
      <label>Local:</label>
      <input type="text" name="local" value="<%= evento.local || '' %>">
    </div>
    <div>
      <label>Descrição:</label>
      <textarea name="descricao"><%= evento.descricao || '' %></textarea>
    </div>
    <button type="submit">Atualizar</button>
  </form>
  <br>
  <a href="/eventos">Cancelar</a>
</body>
</html>